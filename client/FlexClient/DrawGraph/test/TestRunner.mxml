<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/halo"
			    xmlns:adobe="http://www.adobe.com/2009/flexUnitUIRunner"
				creationComplete="runTests()">
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
		
		import AllTestsSuite.AllTestsSuite;
		import org.flexunit.internals.TraceListener;
		import org.flexunit.listeners.CIListener;
		import org.flexunit.listeners.UIListener;
		import org.flexunit.runner.FlexUnitCore;
		
		private var core:FlexUnitCore;
		public function runTests():void
		{
			core = new FlexUnitCore();
			
			// Open up fancy adobe GUI for showing/reading results
			core.addListener( new UIListener( uiListener ) );
			
			// Send output to flexunit ant build.
			core.addListener( new CIListener() );
			
			// Write output to stdout
			core.addListener( new TraceListener() );
			
			core.run( AllTestsSuite );
		}
		
		]]>
	</fx:Script>
	
	<!--[CDATA[
		This is a super fancy GUI that displays the results of the unit tests.
	]]>-->
	<adobe:TestRunnerBase id="uiListener" width="100%" height="100%" />
</s:Application>